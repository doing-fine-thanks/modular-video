<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Modular Test Bed</title>

    <style>
        .video-container {
            min-height: 100%;
            min-width: 100%;
        }
        .video-container video {
            width: 100%;
            height: 100vh;
            position: absolute;
        }

        body {
            background-color: black;
        }

        #modal-overlay {
            width: 100%;
            height: 100vh;
            position: absolute;
            background: rgba(0, 0, 0, 0.7);

            display: flex;
            align-items: center;
            justify-content: center;
        }
        #modal-overlay #modal {
            max-width: 650px;
            width: 100%;
            background: white;
            height: 450px;

            display: flex;
            flex-direction: column;
            padding:10px;
        }

        #modal-overlay #modal .modal-footer {
            margin-top: auto;
            display: flex;
            justify-content: center;
        }
    </style>

    <script type = "text/javascript">


        //movie harness


        movie_map = {
            "clips": {
                    "1": {
                        "file": "clips/1. Banter 1.mp4",
                        "transitions": [
                            {
                                "name": "2",
                                "jump_from_timestamp": 290,
                                "jump_to_clip": "2",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "6-3-chris",
                                "jump_from_timestamp": 277,
                                "jump_to_clip": "6",
                                "jump_to_timestamp": 115
                            },
                            {
                                "name": "2-4-em & toby",
                                "jump_from_timestamp": 283,
                                "jump_to_clip": "2",
                                "jump_to_timestamp": 46
                            }
                        ]
                    },
                    "2": {
                        "file": "clips/2. Banter 2.mp4",
                        "transitions": [
                            {
                                "name": "3",
                                "jump_from_timestamp": 77,
                                "jump_to_clip": "3",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "3": {
                        "file": "clips/3. Baptist Church 1 Carol 1 Work 1 Medical 1.mp4",
                        "transitions": [
                            {
                                "name": "4",
                                "jump_from_timestamp": 212,
                                "jump_to_clip": "4",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "6-1-1990",
                                "jump_from_timestamp": 55,
                                "jump_to_clip": "6",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "17-1-polio",
                                "jump_from_timestamp": 80,
                                "jump_to_clip": "17",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "4": {
                        "file": "clips/4. Carol 2.mp4",
                        "transitions": [
                            {
                                "name": "5",
                                "jump_from_timestamp": 136,
                                "jump_to_clip": "5",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "5": {
                        "file": "clips/5. Baptist Church 2 Divorce 1.mp4",
                        "transitions": [
                            {
                                "name": "6",
                                "jump_from_timestamp": 169,
                                "jump_to_clip": "6",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "6-4-chip",
                                "jump_from_timestamp": 38,
                                "jump_to_clip": "6",
                                "jump_to_timestamp": 120
                            },
                            {
                                "name": "6-2-martha",
                                "jump_from_timestamp": 38,
                                "jump_to_clip": "6",
                                "jump_to_timestamp": 107
                            },
                            {
                                "name": "8-4-dick",
                                "jump_from_timestamp": 158,
                                "jump_to_clip": "8",
                                "jump_to_timestamp": 223
                            }
                        ]
                    },
                    "6": {
                        "file": "clips/6. Divorce 2 Kentucky 1.mp4",
                        "transitions": [
                            {
                                "name": "8",
                                "jump_from_timestamp": 241,
                                "jump_to_clip": "8",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "8-1-2000",
                                "jump_from_timestamp": 223,
                                "jump_to_clip": "8",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "root": {
                        "file": "clips/7. Intro.mp4",
                        "transitions": [
                            {
                                "name": "1",
                                "jump_from_timestamp": 105,
                                "jump_to_clip": "1",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "8",
                                "jump_from_timestamp": 105,
                                "jump_to_clip": "8",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "9",
                                "jump_from_timestamp": 105,
                                "jump_to_clip": "9",
                                "jump_to_timestamp": 7
                            },
                            {
                                "name": "12",
                                "jump_from_timestamp": 105,
                                "jump_to_clip": "12",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "15",
                                "jump_from_timestamp": 105,
                                "jump_to_clip": "15",
                                "jump_to_timestamp": 220
                            },
                            {
                                "name": "20",
                                "jump_from_timestamp": 105,
                                "jump_to_clip": "20",
                                "jump_to_timestamp": 3
                            },
                            {
                                "name": "24",
                                "jump_from_timestamp": 105,
                                "jump_to_clip": "24",
                                "jump_to_timestamp": 47
                            },
                            {
                                "name": "29",
                                "jump_from_timestamp": 105,
                                "jump_to_clip": "29",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "38",
                                "jump_from_timestamp": 105,
                                "jump_to_clip": "38",
                                "jump_to_timestamp": 0
                            },
                        ]
                    },
                    "8": {
                        "file": "clips/8. Youth 1 Jack 1.mp4",
                        "transitions": [
                            {
                                "name": "9",
                                "jump_from_timestamp": 309,
                                "jump_to_clip": "9",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "10-2-jack",
                                "jump_from_timestamp": 308,
                                "jump_to_clip": "10",
                                "jump_to_timestamp": 52
                            }
                        ]
                    },
                    "9": {
                        "file": "clips/9. Julia 1 Philly 1-.mp4",
                        "transitions": [
                            {
                                "name": "10",
                                "jump_from_timestamp": 289,
                                "jump_to_clip": "10",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "16-1-1950",
                                "jump_from_timestamp": 68,
                                "jump_to_clip": "16",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "12-1-julia",
                                "jump_from_timestamp": 289,
                                "jump_to_clip": "12",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "10": {
                        "file": "clips/10. Jack 2  Youth 2 Plainfield 1.mp4",
                        "transitions": [
                            {
                                "name": "11",
                                "jump_from_timestamp": 281,
                                "jump_to_clip": "11",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "11-2-rich",
                                "jump_from_timestamp": 166,
                                "jump_to_clip": "11",
                                "jump_to_timestamp": 140
                            }
                        ]
                    },
                    "11": {
                        "file": "clips/11. Jack 3 Youth 3 Plainfield 2.mp4",
                        "transitions": [
                            {
                                "name": "12",
                                "jump_from_timestamp": 225,
                                "jump_to_clip": "12",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "13-1-norman",
                                "jump_from_timestamp": 26,
                                "jump_to_clip": "13",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "14-1-jack",
                                "jump_from_timestamp": 225,
                                "jump_to_clip": "14",
                                "jump_to_timestamp": 91
                            }
                        ]
                    },
                    "12": {
                        "file": "clips/12. Julia 2 DC 1 Death 1.mp4",
                        "transitions": [
                            {
                                "name": "13",
                                "jump_from_timestamp": 306,
                                "jump_to_clip": "13",
                                "jump_to_timestamp": 0
                            },
                        ]
                    },
                    "13": {
                        "file": "clips/13. Youth 4 New York 1 Plainfield 3-.mp4",
                        "transitions": [
                            {
                                "name": "14",
                                "jump_from_timestamp": 135,
                                "jump_to_clip": "14",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "14": {
                        "file": "clips/14. Jack 4 Norma 1-.mp4",
                        "transitions": [
                            {
                                "name": "15",
                                "jump_from_timestamp": 182,
                                "jump_to_clip": "15",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "15-4-jack",
                                "jump_from_timestamp": 182,
                                "jump_to_clip": "15",
                                "jump_to_timestamp": 231
                            }
                        ]
                    },
                    "15": {
                        "file": "clips/15. Jack 5 DC 2 Birth 1-.mp4",
                        "transitions": [
                            {
                                "name": "16",
                                "jump_from_timestamp": 279,
                                "jump_to_clip": "16",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "16": {
                        "file": "clips/16. Polio 1  Medical 2 Youth 1.mp4",
                        "transitions": [
                            {
                                "name": "17",
                                "jump_from_timestamp": 114,
                                "jump_to_clip": "17",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "17": {
                        "file": "clips/17. Polio 2 Medical 3 Old 1.mp4",
                        "transitions": [
                            {
                                "name": "18",
                                "jump_from_timestamp": 245,
                                "jump_to_clip": "18",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "18": {
                        "file": "clips/18. Polio 3 Death 3 medical 4.mp4",
                        "transitions": [
                            {
                                "name": "19",
                                "jump_from_timestamp": 143,
                                "jump_to_clip": "19",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "52",
                                "jump_from_timestamp": 143,
                                "jump_to_clip": "52",
                                "jump_to_timestamp": 0
                            },
                        ]
                    },
                    "19": {
                        "file": "clips/19. Wedding 1 Plainfield 4.mp4",
                        "transitions": [
                            {
                                "name": "20",
                                "jump_from_timestamp": 154,
                                "jump_to_clip": "20",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "20": {
                        "file": "clips/20. Rich 1.mp4",
                        "transitions": [
                            {
                                "name": "21",
                                "jump_from_timestamp": 104,
                                "jump_to_clip": "21",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "22-2-rich",
                                "jump_from_timestamp": 104,
                                "jump_to_clip": "22",
                                "jump_to_timestamp": 99
                            }
                        ]
                    },
                    "21": {
                        "file": "clips/21. Mary 1 Kennelworth 1 Divorce 2.mp4",
                        "transitions": [
                            {
                                "name": "22",
                                "jump_from_timestamp": 276,
                                "jump_to_clip": "22",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "22-1-mary",
                                "jump_from_timestamp": 194,
                                "jump_to_clip": "22",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "25-3-dating",
                                "jump_from_timestamp": 276,
                                "jump_to_clip": "25",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "22": {
                        "file": "clips/22. Mary 2 Divorce 3 Rich 2.mp4",
                        "transitions": [
                            {
                                "name": "23",
                                "jump_from_timestamp": 137,
                                "jump_to_clip": "23",
                                "jump_to_timestamp": 374
                            },
                            {
                                "name": "23-3-mary",
                                "jump_from_timestamp": 99,
                                "jump_to_clip": "23",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "23": {
                        "file": "clips/23. Rich 3 College 1.mp4",
                        "transitions": [
                            {
                                "name": "24",
                                "jump_from_timestamp": 435,
                                "jump_to_clip": "24",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "24-3-lori",
                                "jump_from_timestamp": 435,
                                "jump_to_clip": "24",
                                "jump_to_timestamp": 49
                            },
                            {
                                "name": "28-5-lori",
                                "jump_from_timestamp": 435,
                                "jump_to_clip": "28",
                                "jump_to_timestamp": 49
                            }
                        ]
                    },
                    "24": {
                        "file": "clips/24. Young Adult 1 Work 2.mp4",
                        "transitions": [
                            {
                                "name": "25",
                                "jump_from_timestamp": 552,
                                "jump_to_clip": "25",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "27-2-parents",
                                "jump_from_timestamp": 552,
                                "jump_to_clip": "27",
                                "jump_to_timestamp": 11
                            }
                        ]
                    },
                    "25": {
                        "file": "clips/25. Young Adult 2 College 2 Dick 1 Dating 1.mp4",
                        "transitions": [
                            {
                                "name": "26",
                                "jump_from_timestamp": 512,
                                "jump_to_clip": "26",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "35-2-dick",
                                "jump_from_timestamp": 421,
                                "jump_to_clip": "35",
                                "jump_to_timestamp": 208
                            }
                        ]
                    },
                    "26": {
                        "file": "clips/26. Dick 2 Marriage 1 Pregnancy 1 Redbank 1.mp4",
                        "transitions": [
                            {
                                "name": "27",
                                "jump_from_timestamp": 118,
                                "jump_to_clip": "27",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "52",
                                "jump_from_timestamp": 118,
                                "jump_to_clip": "52",
                                "jump_to_timestamp": 0
                            },
                        ]
                    },
                    "27": {
                        "file": "clips/27. Somerville 1 Chris 1 Martha 1.mp4",
                        "transitions": [
                            {
                                "name": "28",
                                "jump_from_timestamp": 210,
                                "jump_to_clip": "28",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "28": {
                        "file": "clips/28. Somerville 2 Ms P 1 Death 4 Marriage 2.mp4",
                        "transitions": [
                            {
                                "name": "31",
                                "jump_from_timestamp": 559,
                                "jump_to_clip": "31",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "31-2-lori",
                                "jump_from_timestamp": 549,
                                "jump_to_clip": "31",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "29": {
                        "file": "clips/29. Banter 3.mp4",
                        "transitions": [
                            {
                                "name": "31",
                                "jump_from_timestamp": 261,
                                "jump_to_clip": "31",
                                "jump_to_timestamp": 0
                            },
                        ]
                    },
                    "31": {
                        "file": "clips/31. Julia 4 Guido 2-.mp4",
                        "transitions": [
                            {
                                "name": "32",
                                "jump_from_timestamp": 161,
                                "jump_to_clip": "32",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "32-4-lori",
                                "jump_from_timestamp": 13,
                                "jump_to_clip": "32",
                                "jump_to_timestamp": 394
                            },
                            {
                                "name": "32-3-guido",
                                "jump_from_timestamp": 0,
                                "jump_to_clip": "32",
                                "jump_to_timestamp": 424
                            }
                        ]
                    },
                    "32": {
                        "file": "clips/32. Julia 5 Guido 3 Erminia 1 Italy 1 Hazelton 1.mp4",
                        "transitions": [
                            {
                                "name": "33",
                                "jump_from_timestamp": 569,
                                "jump_to_clip": "33",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "39-2-guido",
                                "jump_from_timestamp": 457,
                                "jump_to_clip": "39",
                                "jump_to_timestamp": 19
                            },
                            {
                                "name": "35-1-lori",
                                "jump_from_timestamp": 569,
                                "jump_to_clip": "35",
                                "jump_to_timestamp": 24
                            }
                        ]
                    },
                    "33": {
                        "file": "clips/33. Julia 6 Guido 4 Death 5.mp4",
                        "transitions": [
                            {
                                "name": "34",
                                "jump_from_timestamp": 256,
                                "jump_to_clip": "34",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "52",
                                "jump_from_timestamp": 256,
                                "jump_to_clip": "52",
                                "jump_to_timestamp": 0
                            },
                        ]
                    },
                    "34": {
                        "file": "clips/34. Julia 7 Youth 2-.mp4",
                        "transitions": [
                            {
                                "name": "35",
                                "jump_from_timestamp": 284,
                                "jump_to_clip": "35",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "35": {
                        "file": "clips/35. Aunt Verna 1 Youth 3-.mp4",
                        "transitions": [
                            {
                                "name": "36",
                                "jump_from_timestamp": 602,
                                "jump_to_clip": "36",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "39-1-jack",
                                "jump_from_timestamp": 322,
                                "jump_to_clip": "39",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "36-3-norman",
                                "jump_from_timestamp": 428,
                                "jump_to_clip": "36",
                                "jump_to_timestamp": 63
                            },
                            {
                                "name": "38-2-18th-bday",
                                "jump_from_timestamp": 602,
                                "jump_to_clip": "38",
                                "jump_to_timestamp": 212
                            }
                        ]
                    },
                    "36": {
                        "file": "clips/36. Youth 4 Flemington 1-.mp4",
                        "transitions": [
                            {
                                "name": "37",
                                "jump_from_timestamp": 339,
                                "jump_to_clip": "37",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "37": {
                        "file": "clips/37. Jack 6 Gert 1 Toms River 1 Chicago 1.mp4",
                        "transitions": [
                            {
                                "name": "39",
                                "jump_from_timestamp": 568,
                                "jump_to_clip": "39",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "38": {
                        "file": "clips/38. Banter.mp4",
                        "transitions": [
                            {
                                "name": "39",
                                "jump_from_timestamp": 266,
                                "jump_to_clip": "39",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "52",
                                "jump_from_timestamp": 266,
                                "jump_to_clip": "52",
                                "jump_to_timestamp": 0
                            },
                        ]
                    },
                    "39": {
                        "file": "clips/39. Jack 7 Guido 5.mp4",
                        "transitions": [
                            {
                                "name": "41",
                                "jump_from_timestamp": 90,
                                "jump_to_clip": "41",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "40": {
                        "file": "clips/40. Ending.mp4",
                        "transitions": []
                    },
                    "41": {
                        "file": "clips/41. Henry 1.mp4",
                        "transitions": [
                            {
                                "name": "42",
                                "jump_from_timestamp": 38,
                                "jump_to_clip": "42",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "47-2-dick",
                                "jump_from_timestamp": 13,
                                "jump_to_clip": "47",
                                "jump_to_timestamp": 122
                            },
                            {
                                "name": "56-6-henry",
                                "jump_from_timestamp": 38,
                                "jump_to_clip": "56",
                                "jump_to_timestamp": 220
                            },
                            {
                                "name": "52",
                                "jump_from_timestamp": 38,
                                "jump_to_clip": "52",
                                "jump_to_timestamp": 0
                            },
                        ]
                    },
                    "42": {
                        "file": "clips/42. Henry 2 Adult 1 Aunt Coleen 1.mp4",
                        "transitions": [
                            {
                                "name": "43",
                                "jump_from_timestamp": 346,
                                "jump_to_clip": "43",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "45-1-julia",
                                "jump_from_timestamp": 66,
                                "jump_to_clip": "45",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "43": {
                        "file": "clips/43. Adult 2.mp4",
                        "transitions": [
                            {
                                "name": "44",
                                "jump_from_timestamp": 254,
                                "jump_to_clip": "44",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "44-5-chip",
                                "jump_from_timestamp": 174,
                                "jump_to_clip": "44",
                                "jump_to_timestamp": 245
                            }
                        ]
                    },
                    "44": {
                        "file": "clips/44. Adult 3 Martha 1.mp4",
                        "transitions": [
                            {
                                "name": "45",
                                "jump_from_timestamp": 685,
                                "jump_to_clip": "45",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "45-4-chris",
                                "jump_from_timestamp": 224,
                                "jump_to_clip": "45",
                                "jump_to_timestamp": 230
                            },
                            {
                                "name": "45-3-chip",
                                "jump_from_timestamp": 259,
                                "jump_to_clip": "45",
                                "jump_to_timestamp": 164
                            }
                        ]
                    },
                    "45": {
                        "file": "clips/45. Adult 4 Kids 1-.mp4",
                        "transitions": [
                            {
                                "name": "46",
                                "jump_from_timestamp": 620,
                                "jump_to_clip": "46",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "54-4-julia",
                                "jump_from_timestamp": 113,
                                "jump_to_clip": "54",
                                "jump_to_timestamp": 409
                            },
                            {
                                "name": "46-5-martha",
                                "jump_from_timestamp": 164,
                                "jump_to_clip": "46",
                                "jump_to_timestamp": 177
                            },
                            {
                                "name": "49-3-kentucky",
                                "jump_from_timestamp": 421,
                                "jump_to_clip": "49",
                                "jump_to_timestamp": 360
                            },
                            {
                                "name": "49-2-parenting",
                                "jump_from_timestamp": 620,
                                "jump_to_clip": "49",
                                "jump_to_timestamp": 83
                            },
                        ]
                    },
                    "46": {
                        "file": "clips/46. Work 2 Martha 2 Emily 1 Bloomsbury 1.mp4",
                        "transitions": [
                            {
                                "name": "47",
                                "jump_from_timestamp": 245,
                                "jump_to_clip": "47",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "47": {
                        "file": "clips/47. Work 3 Divorce 4 Dick 3.mp4",
                        "transitions": [
                            {
                                "name": "48",
                                "jump_from_timestamp": 321,
                                "jump_to_clip": "48",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "48-3-dick",
                                "jump_from_timestamp": 176,
                                "jump_to_clip": "48",
                                "jump_to_timestamp": 178
                            }
                        ]
                    },
                    "48": {
                        "file": "clips/48. Kennelworth 2 Divorce 5 Jutland 1.mp4",
                        "transitions": [
                            {
                                "name": "49",
                                "jump_from_timestamp": 572,
                                "jump_to_clip": "49",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "52",
                                "jump_from_timestamp": 572,
                                "jump_to_clip": "52",
                                "jump_to_timestamp": 0
                            },
                        ]
                    },
                    "49": {
                        "file": "clips/49. Kentucky 2 Tennessee 1 Plainfield 5 Adult 5 Parenting 1 Dick 4.mp4",
                        "transitions": [
                            {
                                "name": "50",
                                "jump_from_timestamp": 842,
                                "jump_to_clip": "50",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "53-5-dick",
                                "jump_from_timestamp": 593,
                                "jump_to_clip": "53",
                                "jump_to_timestamp": 536
                            }
                        ]
                    },
                    "50": {
                        "file": "clips/50. Jack 8 Death 6.mp4",
                        "transitions": [
                            {
                                "name": "53",
                                "jump_from_timestamp": 553,
                                "jump_to_clip": "53",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "53-7-jack",
                                "jump_from_timestamp": 553,
                                "jump_to_clip": "53",
                                "jump_to_timestamp": 897
                            }
                        ]
                    },
                    "51": {
                        "file": "clips/51. banter (other ending-).mp4",
                        "transitions": []
                    },
                    "52": {
                        "file": "clips/52. tornado wonder.mp4",
                        "transitions": []
                    },
                    "53": {
                        "file": "clips/53. Youth 5 Adult 5 War 1 Dick 4.mp4",
                        "transitions": [
                            {
                                "name": "54",
                                "jump_from_timestamp": 1070,
                                "jump_to_clip": "54",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "57-5-jack",
                                "jump_from_timestamp": 958,
                                "jump_to_clip": "57",
                                "jump_to_timestamp": 480
                            }
                        ]
                    },
                    "54": {
                        "file": "clips/54. Youth 6 Julia 8 Death 7.mp4",
                        "transitions": [
                            {
                                "name": "55",
                                "jump_from_timestamp": 429,
                                "jump_to_clip": "55",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "55": {
                        "file": "clips/55. Julia 9.mp4",
                        "transitions": [
                            {
                                "name": "56",
                                "jump_from_timestamp": 219,
                                "jump_to_clip": "56",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "56": {
                        "file": "clips/56. Death 8.mp4",
                        "transitions": [
                            {
                                "name": "57",
                                "jump_from_timestamp": 299,
                                "jump_to_clip": "57",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "57-7-henry",
                                "jump_from_timestamp": 245,
                                "jump_to_clip": "57",
                                "jump_to_timestamp": 400
                            }
                        ]
                    },
                    "57": {
                        "file": "clips/57. Death 9.mp4",
                        "transitions": [
                            {
                                "name": "58",
                                "jump_from_timestamp": 511,
                                "jump_to_clip": "58",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "58": {
                        "file": "clips/58. Death 10 Danny the Wonder Pony 1.mp4",
                        "transitions": [
                            {
                                "name": "59",
                                "jump_from_timestamp": 194,
                                "jump_to_clip": "59",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "59": {
                        "file": "clips/59. Death 11.mp4",
                        "transitions": [
                            {
                                "name": "60",
                                "jump_from_timestamp": 338,
                                "jump_to_clip": "60",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "60": {
                        "file": "clips/60. Lori 1 Youth 7.mp4",
                        "transitions": [
                            {
                                "name": "61",
                                "jump_from_timestamp": 224,
                                "jump_to_clip": "61",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "61": {
                        "file": "clips/61. Henry 3.mp4",
                        "transitions": [
                            {
                                "name": "62",
                                "jump_from_timestamp": 212,
                                "jump_to_clip": "62",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "66-2-henry",
                                "jump_from_timestamp": 212,
                                "jump_to_clip": "66",
                                "jump_to_timestamp": 133
                            }
                        ]
                    },
                    "62": {
                        "file": "clips/62. Danny the Wonder Pony 2 Hair Dressers 1.mp4",
                        "transitions": [
                            {
                                "name": "63",
                                "jump_from_timestamp": 315,
                                "jump_to_clip": "63",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "63": {
                        "file": "clips/63. Kentucky 3.mp4",
                        "transitions": [
                            {
                                "name": "64",
                                "jump_from_timestamp": 693,
                                "jump_to_clip": "64",
                                "jump_to_timestamp": 0
                            },
                            {
                                "name": "64-4-kentucky",
                                "jump_from_timestamp": 693,
                                "jump_to_clip": "64",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "64": {
                        "file": "clips/64. Kentucky 4.mp4",
                        "transitions": [
                            {
                                "name": "65",
                                "jump_from_timestamp": 374,
                                "jump_to_clip": "65",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "65": {
                        "file": "clips/65. Coleen 2 Kevin 1.mp4",
                        "transitions": [
                            {
                                "name": "66",
                                "jump_from_timestamp": 540,
                                "jump_to_clip": "66",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "66": {
                        "file": "clips/66. Henry 4 Death 12.mp4",
                        "transitions": [
                            {
                                "name": "67",
                                "jump_from_timestamp": 864,
                                "jump_to_clip": "67",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "67": {
                        "file": "clips/67. Henry 5 Dick 5 Penny 1.mp4",
                        "transitions": [
                            {
                                "name": "68",
                                "jump_from_timestamp": 623,
                                "jump_to_clip": "68",
                                "jump_to_timestamp": 0
                            }
                        ]
                    },
                    "68": {
                        "file": "clips/68. End.mp4",
                        "transitions": []
                    }
                }
        }

        transitions_manifest = [];
        transitions_entities = [];
        current_video = null;

        function swap_video(new_video) {
            let old_video = null;
            if(current_video !== null) {
                current_video.style.display = "none";
                current_video.pause();
                old_video = current_video;
            }

            current_video = new_video;
            current_video.style.display = "block";
            current_video.play();
            if(old_video != null) {
                old_video.remove()
            }
        }

        function set_transtion_timeouts() {
            for(const transition of transitions_entities){
                transition();
            }
        }

        function set_up_video_root(root, transitions_manifest, transitions_entities, movie_node) {
            let video = document.createElement("video");
            video.setAttribute("controls", "controls");
            video.preload = "auto";
            video.playsInline = true;

            let source = document.createElement("source");
            source.src = video.src = movie_node.clips.root.file;
            source.type = "video/mp4";
            video.appendChild(source);
            current_video = video;
            current_video.onplay = set_transtion_timeouts;
            root.appendChild(video);


            process_transition(movie_node.clips.root, transitions_manifest);
            console.log("Permutation Path:");
            console.log(transitions_manifest)

            let next_movie_node = transitions_manifest.shift();
            set_up_event_trigger_and_swap(root, current_video, next_movie_node);
        }

        function set_up_event_trigger_and_swap(root_element, video_element, next_transition) {
            video_element.ontimeupdate = (event) => {
                if(current_video.currentTime >= next_transition.leave_at){
                    let video = document.createElement("video");
                    video.setAttribute("controls", "controls");
                    video.style.display = "none";
                    video.preload = "auto";
                    video.playsInline = true;

                    let source = document.createElement("source");
                    source.src = video.src = movie_map.clips[next_transition.clip_name].file;
                    source.type = "video/mp4";
                    video.onloadeddata = () => {video.currentTime = next_transition.start_next_at; };
                    // has to be on .onloadeddata event, otherwise safari will overwrite
                    // the set timestamp.

                    video.appendChild(source);
                    root_element.appendChild(video);
                    swap_video(video);


                    console.log("Set to switch to clip " + next_transition.clip_name + "@" + next_transition.start_next_at);
                    console.log(transitions_manifest)

                    set_up_event_trigger_and_swap(root_element, video, transitions_manifest.shift());
                }
            }
        }

        function process_transition(clip_metadata, transitions_manifest, earliest_possible_time = 0) {
            let next_clip_meta;
            let transition;
            if(clip_metadata.transitions.length > 0) {
                let chosen_clip_index = Math.floor(Math.random() * clip_metadata.transitions.length)
                transition = clip_metadata.transitions[chosen_clip_index]
                while(transition.jump_from_timestamp < earliest_possible_time) {

                    chosen_clip_index += 1
                    if(chosen_clip_index >= clip_metadata.transitions.length){ return }
                    transition = clip_metadata.transitions[chosen_clip_index]
                }

                transitions_manifest.push(
                    {
                        "clip_name": transition.jump_to_clip,
                        "leave_at": transition.jump_from_timestamp,
                        "start_next_at": transition.jump_to_timestamp
                    }
                )
                next_clip_meta = movie_map.clips[transition.jump_to_clip]
            }

            if(next_clip_meta) {
                process_transition(next_clip_meta, transitions_manifest, transition.jump_to_timestamp)
            }
        }

        window.onload = init;
        function init () {
            let root_elem = document.getElementById("root-document-hook");
            set_up_video_root(root_elem, transitions_manifest, transitions_entities, movie_map);

            // Hide Modal
            const modalWindowOverlay = document.getElementById("modal-overlay");
            const closeModalButton = document.getElementById("close-modal");

            const hideModalWindow = () => {
                modalWindowOverlay.style.display = 'none';
            }

            closeModalButton.addEventListener("click", hideModalWindow);
        }

    </script>
</head>
    <body>
        <div class="video-container" id="root-document-hook">
        </div>

        <div id="modal-overlay">
            <div id="modal">

                <div class="modal-header">
                    <h3><i>Verna Gray</i></h3>
                </div>

                <div class="modal-content">
                    <p>This is a documentary of my family, it's past, and my grandmother's story telling.</p>
                    <p>What will play is one of 1,286,384,503 different permutations through the 5 hours of
                        footage gathered to create this video.
                    </p>
                    <p>My grandmother will explain it best, but I will say it in my own words here:
                        my family's history isn't a straight line, it's a complicated web with different folds
                        feeling closer to the tip of our tongues each time we go to feel them.
                    </p>
                    <p>This is an attempt to archive my family's history through my grandmother's weaving.</p>
                    <p>If you want to feel a different fold, reload and replay the piece.
                        For more on the piece,
                        <a href="http://logan-h-g-davis.com/#http://logan-h-g-davis.com/content-panel/projects/Verna.html">go here</a>.
                    </p>

                    <br>
                    <br>
                    <p><i>Note: This is an experience meant for a desktop, restrictions on mobile will
                        require you to hit play every time the video transitions.
                    </i></p>

                </div>

                <div class="modal-footer">
                    <button id="close-modal">Close & Continue</button>
                </div>

            </div>
        </div>
    </body>
</html>